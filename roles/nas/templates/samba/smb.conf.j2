# Generated by Ansible for {{ ansible_hostname  }}

[global]
    workgroup = COFFEE
    server string       = Samba on {{ ansible_hostname | upper }}

    hosts allow         = {{ network.subnet | regex_replace('\.\d+\.0$', '.') }} 127. fe80::/10

    printing            = bsd
    printcap name       = /dev/null
    load printers       = no
    disable spoolss     = yes

    log file            = /var/log/samba/log.%m
    max log size        = 1000
    log level           = 1

    max protocol        = SMB3_11

    security            = user
    invalid users       = root

    min receivefile size= 16384

    name resolve order  = wins bcast
    dns proxy           = yes

    mangled names       = no
    case sensitive      = no
    default case        = lower
    preserve case       = yes
    short preserve case = yes

    hide dot files      = yes
    hide unreadable     = yes

    unix charset        = UTF-8
    dos charset         = CP932

    os level            = 0
    local master        = no
    preferred master    = no
    wins support        = no
    domain master       = no

    kernel oplocks      = yes

    follow symlinks     = yes
    unix extensions     = no
    wide links          = yes

    create mask         = 0644
    directory mask      = 0755

    vfs objects         = recycle shadow_copy2 fruit streams_xattr

    recycle:keeptree    = yes
    recycle:touch       = yes
    recycle:versions    = yes
    recycle:maxsize     = 0
    recycle:exclude     = *.tmp

    shadow:snapdir      = .zfs/snapshot
    shadow:sort         = desc
    shadow:format       = _%Y-%m-%d_%H:%M:%S
    shadow:snapprefix   = ^autosnap
    shadow:delimiter    = _
    shadow:localtime    = yes

[ストレージ]
    path                = /storage
    public              = yes
    writable            = yes

    recycle:repository  = /storage/.recycle/%u

[バックアップ]
    path                = /backup
    public              = yes
    writable            = yes

    recycle:repository  = /backup/.recycle/%u

[homes]
    comment             = Home Directories
    browseable          = no
    writable            = yes

    recycle:repository  = .recycle

# Local Variables:
# mode: yaml
# tab-width: 4
# End:
