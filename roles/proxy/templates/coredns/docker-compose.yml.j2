# Generated by Ansible for {{ ansible_hostname  }}
version: "2"
services:
  coredns:
    build: coredns
    container_name: coredns
    restart: on-failure
    expose:
      - '53'
      - '53/udp'
    ports:
      - '53:53'
      - '53:53/udp'
    volumes:
      - './coredns/conf:/etc/coredns'

  etcd:
    image: quay.io/coreos/etcd:v3.5.8
    container_name: etcd
    ports:
      - "2379:2379"
      - "2380:2380"
    command: >-
      /usr/local/bin/etcd
      -name etcd
      -data-dir /etcd-data
      -listen-client-urls http://0.0.0.0:2379
      -advertise-client-urls http://0.0.0.0:2379
      -listen-peer-urls http://0.0.0.0:2380
      -initial-advertise-peer-urls http://0.0.0.0:2380
      -initial-cluster etcd=http://0.0.0.0:2380
      -initial-cluster-token etcd-cluster
      -initial-cluster-state new
