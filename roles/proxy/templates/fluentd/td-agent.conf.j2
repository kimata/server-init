# Generated by Ansible for {{ ansible_hostname  }}
<source>
  @type  forward
  @id    input
  @label @mainstream
  port  24224
</source>

<source>
  @type http
  port 8888
  @label @mainstream
</source>

<label @mainstream>
<match *.**>
  @type forward

  <server>
    host fluentd.kubernetes.green-rabbit.net
    port 24224
  </server>

  <buffer>
    # NOTE: fluentd を再起動しても滞留しているデータを残すため，
    # @type は file にする．
    @type file
    path /dev/shm/fluentd/buffer
    total_limit_size 256m
    flush_mode interval
    flush_interval 10s
    retry_max_times 1000
    retry_max_interval 10m
  </buffer>
</match>
</label>
